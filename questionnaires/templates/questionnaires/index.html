{% extends "inner.html" %}
{% load project_tags %}
{% block title %}Мои тесты{% endblock %}
{% block extra_head %}
    <script type="text/javascript">

    //$(document).ready(function(){
         //$(".alert").alert();

    //});


        function deleteTest(id, objname){

            $('#delbtn').unbind('click');
            $('#objname').html(objname);
            $("#delbtn").click(function(){
                //alert(id);
                window.location.href='{% url 'delete_test' %}'+ id +'/'
            });
            $(".alert").show();
        }

        function closeAlert(){
           $('#delbtn').unbind('click');
           $('#objname').html('');
           $(".alert").hide();
        }

    </script>

{% endblock %}

{% block page_heading %}Мои тесты{% endblock %}

{% block inner_content %}

    <!-- alert -->

    <div class="alert alert-danger fade in" style="display: none">
      <button type="button" class="close" aria-hidden="true" onclick="closeAlert();">&times;</button>
      <h4>Внимание!</h4>
      <p>Вы действительно хотите удалить объект <span id="objname" style="font-weight: bold"></span>?</p>
      <p>
        <button type="button" class="btn btn-danger" id="delbtn">Удалить</button>
        <button type="button" class="btn btn-default" onclick="closeAlert();">Отменить</button>
      </p>
    </div>
  <!-- alert END -->
    <button type="button" class="btn btn-default" onclick="window.location.href='{% url 'create_test' %}'" style="float: right">Создать тест</button>
    <div style="clear: both; padding:10px"></div>
        <div class="table-responsive">
        {% if tests %}
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>#</th>
                  <th style="width: 40%">Название теста</th>
                  <th>Вопросов</th>
                  <th>Дата создания</th>
                  <th>Опубликован</th>
                  <th style="text-align: right">Действия</th>
                </tr>
              </thead>
              <tbody>
              {% for test in tests %}
                <tr>
                  <td>{{ test.id }}</td>
                  <td>{{ test.title }}</td>
                  <td><span class="badge">{{ test.objects_count }}</span></td>
                 <td>{{ test.create_date }}</td>
                  <td>
                      {% if test.is_active %}
                           <span class="glyphicon glyphicon-ok"></span>
                      {% else %}
                           <span class="glyphicon glyphicon-remove"></span>
                      {% endif %}
                  </td>
                  <td  align="right">
                      <button type="button" class="btn btn-success btn-xs" onclick="window.location.href = '{% url 'create_test' %}{{ test.id }}/'">Редактировать</button>
                      <button type="button" class="btn btn-danger btn-xs" onclick="deleteTest({{ test.id }}, '{{ test.title }}');">Удалить</button>
                  </td>
                </tr>

              {% endfor %}
              </tbody>
            </table>
         {% else  %}
            <div class="alert alert-info">
                <p>У вас еще нет ни одного теста</p>
            </div>
         {% endif %}
          </div>
    <ul class="pagination">
    {% if active_page == 1 %}
        <li class="disabled"><span>&laquo;</span></li>
    {% else %}
        <li ><a  href="{% url "account" %}page/{{ active_page|add:"-1" }}/"><span>&laquo;</span></a></li>
    {% endif %}


     {% for page in pages %}
        {% if page == active_page %}
             <li class="active"><span>{{ page }}<span class="sr-only">(current)</span></span></li>

        {% else %}
             <li ><a href="{% url "account" %}page/{{ page }}"><span>{{ page }}</span></a></li>

        {% endif %}
    {% endfor %}
    {% if active_page == pages_count %}
        <li class="disabled"><span>&raquo;</span></li>
    {% else %}
        <li ><a  href="{% url "account" %}page/{{ active_page|add:"1" }}/"><span>&raquo;</span></a></li>
    {% endif %}

    </ul>

{% endblock %}
